{
  "_fv": 73,
  "_type": "procedure",
  "definition": {
    "procedurexml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable type=\"Number\" id=\"dis\">dis</variable></variables><block type=\"play_sound\" x=\"625\" y=\"-108\"><field name=\"sound\">entity.blaze.burn</field><field name=\"soundcategory\">neutral</field><value name=\"x\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"y\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"z\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"level\"><block type=\"math_number\"><field name=\"NUM\">0.5</field></block></value><value name=\"pitch\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value></block><block type=\"event_trigger\" deletable=\"false\" x=\"24\" y=\"-31\"><field name=\"trigger\">no_ext_trigger</field><next><block type=\"world_entity_inrange_foreach\"><value name=\"_placeholder\"><block type=\"entity_iterator\"></block></value><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value><value name=\"range\"><block type=\"math_number\"><field name=\"NUM\">30</field></block></value><statement name=\"foreach\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"entity_isburning\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><statement name=\"DO0\"><block type=\"spawn_particle_multi\"><field name=\"particle\">FLAME</field><value name=\"count\"><block type=\"math_number\"><field name=\"NUM\">5</field></block></value><value name=\"x\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"y\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"z\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"dx\"><block type=\"math_number\"><field name=\"NUM\">0.05</field></block></value><value name=\"dy\"><block type=\"math_number\"><field name=\"NUM\">0.05</field></block></value><value name=\"dz\"><block type=\"math_number\"><field name=\"NUM\">0.05</field></block></value><value name=\"speed\"><block type=\"math_number\"><field name=\"NUM\">0.01</field></block></value><next><block type=\"spawn_particle_multi\"><field name=\"particle\">FLAME</field><value name=\"count\"><block type=\"math_number\"><field name=\"NUM\">3</field></block></value><value name=\"x\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"y\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"z\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"dx\"><block type=\"math_number\"><field name=\"NUM\">0.1</field></block></value><value name=\"dy\"><block type=\"math_number\"><field name=\"NUM\">0.1</field></block></value><value name=\"dz\"><block type=\"math_number\"><field name=\"NUM\">0.1</field></block></value><value name=\"speed\"><block type=\"math_number\"><field name=\"NUM\">0.1</field></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"spawn_particle_multi\"><field name=\"particle\">GLOW_SQUID_INK</field><value name=\"count\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"x\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"y\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"z\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"dx\"><block type=\"math_number\"><field name=\"NUM\">0.01</field></block></value><value name=\"dy\"><block type=\"math_number\"><field name=\"NUM\">0.01</field></block></value><value name=\"dz\"><block type=\"math_number\"><field name=\"NUM\">0.01</field></block></value><value name=\"speed\"><block type=\"math_number\"><field name=\"NUM\">0</field></block></value></block></statement><next><block type=\"java_code\"><field name=\"CODE\">// 0. GET OWNER&amp;#10;net.minecraft.world.entity.Entity owner = null;&amp;#10;if (immediatesourceentity instanceof net.minecraft.world.entity.projectile.Projectile proj) {&amp;#10;    owner = proj.getOwner();&amp;#10;}&amp;#10;&amp;#10;// 1. RESET SEEKING STATE&amp;#10;// Default to \"Solid Arrow\" (Not Seeking)&amp;#10;immediatesourceentity.getPersistentData().putBoolean(\"ActivelySeeking\", false);&amp;#10;if (immediatesourceentity instanceof net.minecraft.world.entity.projectile.AbstractArrow arrow) {&amp;#10;    arrow.setPierceLevel((byte) 0);&amp;#10;}&amp;#10;&amp;#10;// 2. CHECK FOR ENEMY&amp;#10;if (entityiterator instanceof net.minecraft.world.entity.monster.Enemy &amp;#10;    &amp;&amp; entityiterator != owner &amp;#10;    &amp;&amp; entityiterator != immediatesourceentity) {&amp;#10;&amp;#10;    // --- A. SMOOTH STEERING LOGIC ---&amp;#10;    double currentSpeed = immediatesourceentity.getDeltaMovement().length();&amp;#10;    // Keep minimum speed to prevent floating arrows&amp;#10;    if (currentSpeed &lt; 0.1) currentSpeed = 0.5;&amp;#10;&amp;#10;    // Calculate direction&amp;#10;    double dX = entityiterator.getX() - immediatesourceentity.getX();&amp;#10;    double dY = entityiterator.getBoundingBox().getCenter().y - immediatesourceentity.getY();&amp;#10;    double dZ = entityiterator.getZ() - immediatesourceentity.getZ();&amp;#10;    double dist = Math.sqrt(dX * dX + dY * dY + dZ * dZ);&amp;#10;    &amp;#10;    if (dist &gt; 0) {&amp;#10;        net.minecraft.world.phys.Vec3 currentVelocity = immediatesourceentity.getDeltaMovement();&amp;#10;        net.minecraft.world.phys.Vec3 desiredDir = new net.minecraft.world.phys.Vec3(dX, dY, dZ).normalize();&amp;#10;        &amp;#10;        // Blend directions (0.3 = Smooth turn)&amp;#10;        double turnSpeed = 0.3; &amp;#10;        &amp;#10;        net.minecraft.world.phys.Vec3 newDir = currentVelocity.normalize().scale(1.0 - turnSpeed).add(desiredDir.scale(turnSpeed));&amp;#10;        &amp;#10;        // Apply new velocity&amp;#10;        immediatesourceentity.setDeltaMovement(newDir.normalize().scale(currentSpeed));&amp;#10;    }&amp;#10;&amp;#10;    // --- B. ACTIVATE GHOST MODE ---&amp;#10;    if (immediatesourceentity instanceof net.minecraft.world.entity.projectile.AbstractArrow arrow) {&amp;#10;        arrow.setPierceLevel((byte) 5); &amp;#10;        immediatesourceentity.getPersistentData().putBoolean(\"ActivelySeeking\", true);&amp;#10;    }&amp;#10;&amp;#10;    // --- C. MANUAL IMPACT TRIGGER (Max 18 Damage) ---&amp;#10;    // Deals damage based on velocity.&amp;#10;    if (immediatesourceentity.getBoundingBox().intersects(entityiterator.getBoundingBox().inflate(0.3))) {&amp;#10;        &amp;#10;        // CALCULATE DAMAGE: Speed * 6.0&amp;#10;        // Speed 3.0 (Full Charge) * 6.0 = 18.0 Damage&amp;#10;        float calculatedDamage = (float) (currentSpeed * 6.0);&amp;#10;        &amp;#10;        // Safety: Ensure it deals at least 6 damage (3 hearts)&amp;#10;        if (calculatedDamage &lt; 6.0f) calculatedDamage = 6.0f; &amp;#10;&amp;#10;        // 1. Deal Damage&amp;#10;        if (world instanceof net.minecraft.world.level.Level _lvl) {&amp;#10;             entityiterator.hurt(_lvl.damageSources().arrow((net.minecraft.world.entity.projectile.AbstractArrow)immediatesourceentity, owner), calculatedDamage);&amp;#10;        }&amp;#10;        &amp;#10;        // 2. Kill the Arrow&amp;#10;        immediatesourceentity.discard();&amp;#10;    }&amp;#10;&amp;#10;    break; &amp;#10;}</field></block></next></block></statement></block></next></block><block type=\"play_sound\" x=\"-157\" y=\"272\"><field name=\"sound\">block.conduit.deactivate</field><field name=\"soundcategory\">neutral</field><value name=\"x\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"y\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"z\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"level\"><block type=\"math_number\"><field name=\"NUM\">0.025</field></block></value><value name=\"pitch\"><block type=\"math_number\"><field name=\"NUM\">2</field></block></value></block><block type=\"controls_if\" x=\"626\" y=\"346\"><value name=\"IF0\"><block type=\"compare_entities\"><value name=\"a\"><block type=\"world_entity_inrange\"><field name=\"entity\">EntityLiving</field><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value><value name=\"range\"><block type=\"math_number\"><field name=\"NUM\">30</field></block></value></block></value><value name=\"b\"><block type=\"entity_iterator\"></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_negate\"><value name=\"BOOL\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"compare_entities\"><value name=\"a\"><block type=\"entity_iterator\"></block></value><value name=\"b\"><block type=\"entity_from_deps\"></block></value></block></value><value name=\"B\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"compare_entities\"><value name=\"a\"><block type=\"entity_iterator\"></block></value><value name=\"b\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"B\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"entity_iscreative\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_istamed_by\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value><value name=\"tamedBy\"><block type=\"entity_from_deps\"></block></value></block></value></block></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set_number\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" is_player_var=\"false\" has_entity=\"false\"></mutation><field name=\"VAR\">local:dis</field><value name=\"VAL\"><block type=\"math_singular_ops\"><field name=\"OP\">ROOT</field><value name=\"NUM\"><block type=\"math_dual_ops\"><field name=\"OP\">ADD</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">ADD</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">POWER</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"math_number\"><field name=\"NUM\">2</field></block></value></block></value><value name=\"B\"><block type=\"math_dual_ops\"><field name=\"OP\">POWER</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"math_number\"><field name=\"NUM\">2</field></block></value></block></value></block></value><value name=\"B\"><block type=\"math_dual_ops\"><field name=\"OP\">POWER</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"math_number\"><field name=\"NUM\">2</field></block></value></block></value></block></value></block></value><next><block type=\"entity_set_movement\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value><value name=\"vx\"><block type=\"math_dual_ops\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"variables_get_number\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" is_player_var=\"false\" has_entity=\"false\"></mutation><field name=\"VAR\">local:dis</field></block></value></block></value><value name=\"vy\"><block type=\"math_dual_ops\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"variables_get_number\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" is_player_var=\"false\" has_entity=\"false\"></mutation><field name=\"VAR\">local:dis</field></block></value></block></value><value name=\"vz\"><block type=\"math_dual_ops\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"variables_get_number\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" is_player_var=\"false\" has_entity=\"false\"></mutation><field name=\"VAR\">local:dis</field></block></value></block></value></block></next></block></statement></block></statement></block><block type=\"entity_getowner\" x=\"1287\" y=\"386\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block><block type=\"logic_negate\" x=\"955\" y=\"720\"><value name=\"BOOL\"><block type=\"entity_istamed\"></block></value></block><block type=\"entity_is_tagged_in\" x=\"794\" y=\"814\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"tag\"><block type=\"text\"><field name=\"TEXT\">minecraft:skeletons</field></block></value></block></xml>"
  }
}