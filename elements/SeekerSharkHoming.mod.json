{
  "_fv": 73,
  "_type": "procedure",
  "definition": {
    "procedurexml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable type=\"Number\" id=\"dis\">dis</variable></variables><block type=\"logic_binary_ops\" inline=\"false\" x=\"573\" y=\"-39\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_entity_compare\"><field name=\"entity\">EntityLiving</field><value name=\"compareTo\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"world_entity_inrange_exists\"><field name=\"entity\">EntityLiving</field><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value><value name=\"range\"><block type=\"math_number\"><field name=\"NUM\">30</field></block></value></block></value></block><block type=\"entity_submerged_height\" x=\"10\" y=\"10\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value></block><block type=\"logic_entity_compare\" x=\"884\" y=\"101\"><field name=\"entity\">CUSTOM:SeekerShark</field><comment pinned=\"false\" h=\"80\" w=\"160\">Wolf is entity to be attacked, husk is attacker. Replace as needed. Tags also work.Note that this doesnt override the entity's normal targets. It just adds to them.</comment><value name=\"compareTo\"><block type=\"entity_from_deps\"></block></value></block><block type=\"event_trigger\" deletable=\"false\" x=\"208\" y=\"146\"><field name=\"trigger\">no_ext_trigger</field><next><block type=\"world_entity_inrange_foreach\"><value name=\"_placeholder\"><block type=\"entity_iterator\"></block></value><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value><value name=\"range\"><block type=\"math_number\"><field name=\"NUM\">30</field></block></value><statement name=\"foreach\"><block type=\"spawn_particle_multi\"><field name=\"particle\">GLOW_SQUID_INK</field><value name=\"count\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"x\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"y\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"z\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"dx\"><block type=\"math_number\"><field name=\"NUM\">0.01</field></block></value><value name=\"dy\"><block type=\"math_number\"><field name=\"NUM\">0.01</field></block></value><value name=\"dz\"><block type=\"math_number\"><field name=\"NUM\">0.01</field></block></value><value name=\"speed\"><block type=\"math_number\"><field name=\"NUM\">0</field></block></value><next><block type=\"spawn_particle_multi\"><field name=\"particle\">GLOW_SQUID_INK</field><value name=\"count\"><block type=\"math_number\"><field name=\"NUM\">0.1</field></block></value><value name=\"x\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"y\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"z\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"dx\"><block type=\"math_number\"><field name=\"NUM\">0.1</field></block></value><value name=\"dy\"><block type=\"math_number\"><field name=\"NUM\">0.1</field></block></value><value name=\"dz\"><block type=\"math_number\"><field name=\"NUM\">0.1</field></block></value><value name=\"speed\"><block type=\"math_number\"><field name=\"NUM\">0</field></block></value><next><block type=\"java_code\"><field name=\"CODE\">// --- 1. INITIALIZE DATA (First Tick) ---&amp;#10;if (!immediatesourceentity.getPersistentData().contains(\"HitCount\")) {&amp;#10;    immediatesourceentity.getPersistentData().putDouble(\"HitCount\", 0);&amp;#10;    immediatesourceentity.getPersistentData().putString(\"HitUUIDs\", \"\");&amp;#10;}&amp;#10;&amp;#10;// Load current tracking state&amp;#10;double hitCount = immediatesourceentity.getPersistentData().getDouble(\"HitCount\");&amp;#10;String hitUUIDs = immediatesourceentity.getPersistentData().getString(\"HitUUIDs\");&amp;#10;String targetUUID = entityiterator.getUUID().toString();&amp;#10;&amp;#10;// Compatibility Check: Is this an Illager? (Uses Vanilla Tags for max compatibility)&amp;#10;boolean isIllager = entityiterator.getType().is(net.minecraft.tags.EntityTypeTags.ILLAGER);&amp;#10;&amp;#10;// --- 2. TARGET VALIDATION ---&amp;#10;// We check: Not Self, Not Owner, Not in Ignore List, Not Illager/Witch/Thalassoger&amp;#10;if (entityiterator != immediatesourceentity &amp;&amp; &amp;#10;    !hitUUIDs.contains(targetUUID) &amp;&amp; &amp;#10;    !isIllager &amp;&amp;&amp;#10;    !(entityiterator instanceof net.minecraft.world.entity.monster.Witch) &amp;&amp;&amp;#10;    !(entityiterator instanceof net.mcreator.sharks.entity.ThalassogerEntity) &amp;&amp;&amp;#10;    !(entityiterator instanceof Player _plr &amp;&amp; _plr.getAbilities().instabuild)) { &amp;#10;&amp;#10;    // --- 3. HOMING MOVEMENT (Steer towards CURRENT target) ---&amp;#10;    // Only apply steering if we haven't collided yet&amp;#10;    double dX = entityiterator.getX() - immediatesourceentity.getX();&amp;#10;    double dY = entityiterator.getBoundingBox().getCenter().y - immediatesourceentity.getY();&amp;#10;    double dZ = entityiterator.getZ() - immediatesourceentity.getZ();&amp;#10;    double dist = Math.sqrt(dX * dX + dY * dY + dZ * dZ);&amp;#10;&amp;#10;    if (dist &gt; 0 &amp;&amp; dist &lt;= 12.0) { // Range 12 blocks&amp;#10;        double currentSpeed = immediatesourceentity.getDeltaMovement().length();&amp;#10;        if (currentSpeed &lt; 0.5) currentSpeed = 0.5; // Maintain speed&amp;#10;&amp;#10;        net.minecraft.world.phys.Vec3 currentVel = immediatesourceentity.getDeltaMovement();&amp;#10;        net.minecraft.world.phys.Vec3 desiredVel = new net.minecraft.world.phys.Vec3(dX, dY, dZ).normalize();&amp;#10;        &amp;#10;        // Turn Speed (0.3 = Snappy response)&amp;#10;        double turnSpeed = 0.3; &amp;#10;        net.minecraft.world.phys.Vec3 newVel = currentVel.normalize().scale(1.0 - turnSpeed).add(desiredVel.scale(turnSpeed));&amp;#10;        &amp;#10;        immediatesourceentity.setDeltaMovement(newVel.normalize().scale(currentSpeed));&amp;#10;        &amp;#10;        // Mark as seeking&amp;#10;        immediatesourceentity.getPersistentData().putBoolean(\"ActivelySeeking\", true);&amp;#10;    }&amp;#10;&amp;#10;    // --- 4. IMPACT TRIGGER (The Ricochet Logic) ---&amp;#10;    // If we physically touch the target...&amp;#10;    if (immediatesourceentity.getBoundingBox().intersects(entityiterator.getBoundingBox().inflate(0.2))) {&amp;#10;        &amp;#10;        // A. DEAL DAMAGE&amp;#10;        float damage = 8.0f; &amp;#10;        if (world instanceof net.minecraft.world.level.Level _lvl) {&amp;#10;            if (immediatesourceentity instanceof LivingEntity _liveSrc) {&amp;#10;                 entityiterator.hurt(_lvl.damageSources().mobAttack(_liveSrc), damage);&amp;#10;            } else {&amp;#10;                 entityiterator.hurt(_lvl.damageSources().generic(), damage);&amp;#10;            }&amp;#10;        }&amp;#10;&amp;#10;        // B. UPDATE CHAIN DATA&amp;#10;        hitCount++;&amp;#10;        String newIgnoreList = hitUUIDs + targetUUID + \",\";&amp;#10;        immediatesourceentity.getPersistentData().putDouble(\"HitCount\", hitCount);&amp;#10;        immediatesourceentity.getPersistentData().putString(\"HitUUIDs\", newIgnoreList);&amp;#10;&amp;#10;        // C. FIND NEXT TARGET (Bounce!)&amp;#10;        boolean foundNext = false;&amp;#10;        &amp;#10;        // Only look for a new target if we haven't hit max (3) yet&amp;#10;        if (hitCount &lt; 3) {&amp;#10;            // Scan nearby area for potential next victims&amp;#10;            java.util.List&lt;Entity&gt; nearby = world.getEntitiesOfClass(Entity.class, immediatesourceentity.getBoundingBox().inflate(12.0), e -&gt; true);&amp;#10;            &amp;#10;            for (Entity next : nearby) {&amp;#10;                // Is this a valid NEXT target? (Not self, not current target, not already hit, not excluded)&amp;#10;                if (next != immediatesourceentity &amp;&amp; &amp;#10;                    !newIgnoreList.contains(next.getUUID().toString()) &amp;&amp;&amp;#10;                    !next.getType().is(net.minecraft.tags.EntityTypeTags.ILLAGER) &amp;&amp;&amp;#10;                    !(next instanceof net.minecraft.world.entity.monster.Witch) &amp;&amp;&amp;#10;                    !(next instanceof net.mcreator.sharks.entity.ThalassogerEntity) &amp;&amp;&amp;#10;                    !(next instanceof Player _p &amp;&amp; _p.getAbilities().instabuild)) {&amp;#10;                    &amp;#10;                    // FOUND ONE! LAUNCH TOWARDS IT!&amp;#10;                    double bX = next.getX() - immediatesourceentity.getX();&amp;#10;                    double bY = next.getBoundingBox().getCenter().y - immediatesourceentity.getY();&amp;#10;                    double bZ = next.getZ() - immediatesourceentity.getZ();&amp;#10;                    &amp;#10;                    // Apply instant velocity change (The \"Bounce\")&amp;#10;                    net.minecraft.world.phys.Vec3 bounceDir = new net.minecraft.world.phys.Vec3(bX, bY, bZ).normalize();&amp;#10;                    immediatesourceentity.setDeltaMovement(bounceDir.scale(1.5)); // 1.5 Speed for fast ricochet&amp;#10;                    &amp;#10;                    foundNext = true;&amp;#10;                    break; // Stop looking, we found our next link&amp;#10;                }&amp;#10;            }&amp;#10;        }&amp;#10;&amp;#10;        // D. FINAL EXPLOSION CHECK&amp;#10;        // If we hit max targets OR we couldn't find anyone to bounce to...&amp;#10;        if (hitCount &gt;= 3 || !foundNext) {&amp;#10;            if (world instanceof net.minecraft.world.level.Level _lvl) {&amp;#10;                // Boom!&amp;#10;                _lvl.explode(null, immediatesourceentity.getX(), immediatesourceentity.getY(), immediatesourceentity.getZ(), 1.5f, net.minecraft.world.level.Level.ExplosionInteraction.NONE);&amp;#10;            }&amp;#10;            immediatesourceentity.discard(); // Despawn&amp;#10;        }&amp;#10;        &amp;#10;        // Break the loop so we don't process multiple collisions in one tick&amp;#10;        break;&amp;#10;    }&amp;#10;}</field></block></next></block></next></block></statement></block></next></block><block type=\"controls_if\" x=\"1098\" y=\"113\"><value name=\"IF0\"><block type=\"logic_entity_compare\"><field name=\"entity\">CUSTOM:SeekerShark</field><comment pinned=\"false\" h=\"80\" w=\"160\">Wolf is entity to be attacked, husk is attacker. Replace as needed. Tags also work.Note that this doesnt override the entity's normal targets. It just adds to them.</comment><value name=\"compareTo\"><block type=\"entity_from_deps\"></block></value></block></value></block><block type=\"compare_entities\" x=\"1040\" y=\"477\"><value name=\"b\"><block type=\"immediate_source_entity_from_deps\"></block></value></block><block type=\"compare_entities\" x=\"1026\" y=\"512\"><value name=\"a\"><block type=\"entity_iterator\"></block></value><value name=\"b\"><block type=\"entity_from_deps\"></block></value></block><block type=\"controls_if\" x=\"522\" y=\"611\"><statement name=\"DO0\"><block type=\"controls_if\"></block></statement></block><block type=\"controls_if\" x=\"964\" y=\"593\"><value name=\"IF0\"><block type=\"compare_entities\"><value name=\"a\"><block type=\"world_entity_inrange\"><field name=\"entity\">EntityLiving</field><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value><value name=\"range\"><block type=\"math_number\"><field name=\"NUM\">30</field></block></value></block></value><value name=\"b\"><block type=\"entity_iterator\"></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_negate\"><value name=\"BOOL\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"compare_entities\"><value name=\"a\"><block type=\"entity_iterator\"></block></value><value name=\"b\"><block type=\"entity_from_deps\"></block></value></block></value><value name=\"B\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"compare_entities\"><value name=\"a\"><block type=\"entity_iterator\"></block></value><value name=\"b\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value><value name=\"B\"><block type=\"entity_iscreative\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value></block></value></block></value><value name=\"B\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"logic_entity_compare\"><field name=\"entity\">EntitySpellcasterIllager</field><value name=\"compareTo\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"logic_entity_compare\"><field name=\"entity\">CUSTOM:Thalassoger</field><value name=\"compareTo\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"logic_entity_compare\"><field name=\"entity\">EntityEvoker</field><value name=\"compareTo\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"logic_entity_compare\"><field name=\"entity\">EntityVindicator</field><value name=\"compareTo\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"logic_entity_compare\"><field name=\"entity\">EntityPillager</field><value name=\"compareTo\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"logic_entity_compare\"><field name=\"entity\">EntityWitch</field><value name=\"compareTo\"><block type=\"entity_iterator\"></block></value></block></value></block></value></block></value></block></value></block></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set_number\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" is_player_var=\"false\" has_entity=\"false\"></mutation><field name=\"VAR\">local:dis</field><value name=\"VAL\"><block type=\"math_singular_ops\"><field name=\"OP\">ROOT</field><value name=\"NUM\"><block type=\"math_dual_ops\"><field name=\"OP\">ADD</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">ADD</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">POWER</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"math_number\"><field name=\"NUM\">2</field></block></value></block></value><value name=\"B\"><block type=\"math_dual_ops\"><field name=\"OP\">POWER</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"math_number\"><field name=\"NUM\">2</field></block></value></block></value></block></value><value name=\"B\"><block type=\"math_dual_ops\"><field name=\"OP\">POWER</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"math_number\"><field name=\"NUM\">2</field></block></value></block></value></block></value></block></value><next><block type=\"entity_set_movement\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value><value name=\"vx\"><block type=\"math_dual_ops\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_x\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"variables_get_number\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" is_player_var=\"false\" has_entity=\"false\"></mutation><field name=\"VAR\">local:dis</field></block></value></block></value><value name=\"vy\"><block type=\"math_dual_ops\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_y\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"variables_get_number\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" is_player_var=\"false\" has_entity=\"false\"></mutation><field name=\"VAR\">local:dis</field></block></value></block></value><value name=\"vz\"><block type=\"math_dual_ops\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><block type=\"math_dual_ops\"><field name=\"OP\">MINUS</field><value name=\"A\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"entity_iterator\"></block></value></block></value><value name=\"B\"><block type=\"entity_pos_z\"><value name=\"entity\"><block type=\"immediate_source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"variables_get_number\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" is_player_var=\"false\" has_entity=\"false\"></mutation><field name=\"VAR\">local:dis</field></block></value></block></value></block></next></block></statement></block></statement></block><block type=\"logic_negate\" x=\"83\" y=\"682\"></block></xml>"
  }
}