{
  "_fv": 73,
  "_type": "procedure",
  "definition": {
    "procedurexml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><block type=\"event_trigger\" deletable=\"false\" x=\"40\" y=\"40\"><field name=\"trigger\">no_ext_trigger</field><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_entity_compare\"><field name=\"entity\">EntityPlayer</field><value name=\"compareTo\"><block type=\"source_entity_from_deps\"></block></value></block></value><value name=\"B\"><block type=\"logic_entity_compare\"><field name=\"entity\">CUSTOM:ThresherShark</field><value name=\"compareTo\"><block type=\"entity_from_deps\"></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><block type=\"compare_mcitems\"><value name=\"a\"><block type=\"entity_iteminhand\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value></block></value><value name=\"b\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:SharkMeal</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_negate\"><value name=\"BOOL\"><block type=\"entity_nbt_logic_get\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"tagName\"><block type=\"text\"><field name=\"TEXT\">canBeMilked</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"entity_swing_mainhand\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_swing_mainhand\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"math_binary_ops\"><field name=\"OP\">GT</field><value name=\"A\"><block type=\"itemstack_get_count\"><value name=\"item\"><block type=\"entity_iteminhand\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"math_number\"><field name=\"NUM\">0</field></block></value></block></value><value name=\"B\"><block type=\"logic_negate\"><value name=\"BOOL\"><block type=\"entity_iscreative\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:SharkMeal</field></block></value><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value><next><block type=\"entity_add_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">Items.BUCKET</field></block></value><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value></block></next></block></statement><next><block type=\"entity_nbt_logic_set\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"tagName\"><block type=\"text\"><field name=\"TEXT\">canBeMilked</field></block></value><value name=\"tagValue\"><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"java_code\"><field name=\"CODE\">// 1. ADD 3 CHARGES&amp;#10;double currentCharges = sourceentity.getPersistentData().getDouble(\"ThresherRiptideCharges\");&amp;#10;double newTotal = currentCharges + 3;&amp;#10;&amp;#10;sourceentity.getPersistentData().putDouble(\"ThresherRiptideCharges\", newTotal);&amp;#10;&amp;#10;// 2. PLAY SOUND&amp;#10;if (world instanceof net.minecraft.world.level.Level _level) {&amp;#10;    if (!_level.isClientSide()) {&amp;#10;        _level.playSound(null, sourceentity.blockPosition(), net.minecraftforge.registries.ForgeRegistries.SOUND_EVENTS.getValue(new net.minecraft.resources.ResourceLocation(\"block.conduit.activate\")), net.minecraft.sounds.SoundSource.PLAYERS, 1, 1);&amp;#10;    } else {&amp;#10;        _level.playLocalSound(sourceentity.getX(), sourceentity.getY(), sourceentity.getZ(), net.minecraftforge.registries.ForgeRegistries.SOUND_EVENTS.getValue(new net.minecraft.resources.ResourceLocation(\"block.conduit.activate\")), net.minecraft.sounds.SoundSource.PLAYERS, 1, 1, false);&amp;#10;    }&amp;#10;}&amp;#10;&amp;#10;// 3. VISUALS: ABSORPTION EFFECT ON PLAYER&amp;#10;if (world instanceof net.minecraft.server.level.ServerLevel _level) {&amp;#10;    for (int i = 0; i &lt; 20; i++) {&amp;#10;        // Calculate random position around the PLAYER&amp;#10;        double offsetX = (Math.random() - 0.5) * 3.0;&amp;#10;        double offsetY = (Math.random() - 0.5) * 3.0 + 1.0; // +1.0 to center on Player's chest&amp;#10;        double offsetZ = (Math.random() - 0.5) * 3.0;&amp;#10;&amp;#10;        // Spawn particles around SOURCEENTITY (Player) moving inwards&amp;#10;        _level.sendParticles(net.minecraft.core.particles.ParticleTypes.NAUTILUS,&amp;#10;            sourceentity.getX() + offsetX, &amp;#10;            sourceentity.getY() + offsetY, &amp;#10;            sourceentity.getZ() + offsetZ, &amp;#10;            0, &amp;#10;            -offsetX * 0.1, &amp;#10;            -offsetY * 0.1, &amp;#10;            -offsetZ * 0.1, &amp;#10;            1.0); &amp;#10;    }&amp;#10;}&amp;#10;&amp;#10;// 4. SHOW STATUS MESSAGE&amp;#10;if (sourceentity instanceof net.minecraft.world.entity.player.Player _player &amp;&amp; !_player.level().isClientSide()) {&amp;#10;    _player.displayClientMessage(net.minecraft.network.chat.Component.literal(\"\\u00A7bThresher Charges: \" + (int)newTotal), true);&amp;#10;}</field><next><block type=\"play_sound\"><field name=\"sound\">entity.fox.bite</field><field name=\"soundcategory\">neutral</field><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value><value name=\"level\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"pitch\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><next><block type=\"entity_add_potion_advanced\"><field name=\"potion\">REGENERATION</field><value name=\"level\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"duration\"><block type=\"math_number\"><field name=\"NUM\">200</field></block></value><value name=\"ambient\"><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value><value name=\"particles\"><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"spawn_particle_multi\"><field name=\"particle\">CRIT</field><value name=\"count\"><block type=\"math_number\"><field name=\"NUM\">5</field></block></value><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value><value name=\"dx\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"dy\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"dz\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"speed\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><next><block type=\"wait\"><value name=\"ticks\"><block type=\"math_number\"><field name=\"NUM\">20</field></block></value><statement name=\"do\"><block type=\"entity_nbt_logic_set\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"tagName\"><block type=\"text\"><field name=\"TEXT\">canBeMilked</field></block></value><value name=\"tagValue\"><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement><value name=\"IF1\"><block type=\"compare_mcitems\"><value name=\"a\"><block type=\"entity_iteminoffhand\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value></block></value><value name=\"b\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:SharkMeal</field></block></value></block></value><statement name=\"DO1\"><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_negate\"><value name=\"BOOL\"><block type=\"entity_nbt_logic_get\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"tagName\"><block type=\"text\"><field name=\"TEXT\">canBeMilked</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"entity_swing_mainhand\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"entity_swing_offhand\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value><next><block type=\"controls_if\"><value name=\"IF0\"><block type=\"logic_binary_ops\" inline=\"false\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"math_binary_ops\"><field name=\"OP\">GT</field><value name=\"A\"><block type=\"itemstack_get_count\"><value name=\"item\"><block type=\"entity_iteminoffhand\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value></block></value></block></value><value name=\"B\"><block type=\"math_number\"><field name=\"NUM\">0</field></block></value></block></value><value name=\"B\"><block type=\"logic_negate\"><value name=\"BOOL\"><block type=\"entity_iscreative\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"entity_remove_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:SharkMeal</field></block></value><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value><next><block type=\"entity_add_item\"><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">Items.BUCKET</field></block></value><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value></block></next></block></statement><next><block type=\"entity_nbt_logic_set\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"tagName\"><block type=\"text\"><field name=\"TEXT\">canBeMilked</field></block></value><value name=\"tagValue\"><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"java_code\"><field name=\"CODE\">// 1. ADD 3 CHARGES&amp;#10;double currentCharges = sourceentity.getPersistentData().getDouble(\"ThresherRiptideCharges\");&amp;#10;double newTotal = currentCharges + 3;&amp;#10;&amp;#10;sourceentity.getPersistentData().putDouble(\"ThresherRiptideCharges\", newTotal);&amp;#10;&amp;#10;// 2. PLAY SOUND&amp;#10;if (world instanceof net.minecraft.world.level.Level _level) {&amp;#10;    if (!_level.isClientSide()) {&amp;#10;        _level.playSound(null, sourceentity.blockPosition(), net.minecraftforge.registries.ForgeRegistries.SOUND_EVENTS.getValue(new net.minecraft.resources.ResourceLocation(\"block.conduit.activate\")), net.minecraft.sounds.SoundSource.PLAYERS, 1, 1);&amp;#10;    } else {&amp;#10;        _level.playLocalSound(sourceentity.getX(), sourceentity.getY(), sourceentity.getZ(), net.minecraftforge.registries.ForgeRegistries.SOUND_EVENTS.getValue(new net.minecraft.resources.ResourceLocation(\"block.conduit.activate\")), net.minecraft.sounds.SoundSource.PLAYERS, 1, 1, false);&amp;#10;    }&amp;#10;}&amp;#10;&amp;#10;// 3. VISUALS: ABSORPTION EFFECT ON PLAYER&amp;#10;if (world instanceof net.minecraft.server.level.ServerLevel _level) {&amp;#10;    for (int i = 0; i &lt; 20; i++) {&amp;#10;        // Calculate random position around the PLAYER&amp;#10;        double offsetX = (Math.random() - 0.5) * 3.0;&amp;#10;        double offsetY = (Math.random() - 0.5) * 3.0 + 1.0; // +1.0 to center on Player's chest&amp;#10;        double offsetZ = (Math.random() - 0.5) * 3.0;&amp;#10;&amp;#10;        // Spawn particles around SOURCEENTITY (Player) moving inwards&amp;#10;        _level.sendParticles(net.minecraft.core.particles.ParticleTypes.NAUTILUS,&amp;#10;            sourceentity.getX() + offsetX, &amp;#10;            sourceentity.getY() + offsetY, &amp;#10;            sourceentity.getZ() + offsetZ, &amp;#10;            0, &amp;#10;            -offsetX * 0.1, &amp;#10;            -offsetY * 0.1, &amp;#10;            -offsetZ * 0.1, &amp;#10;            1.0); &amp;#10;    }&amp;#10;}&amp;#10;&amp;#10;// 4. SHOW STATUS MESSAGE&amp;#10;if (sourceentity instanceof net.minecraft.world.entity.player.Player _player &amp;&amp; !_player.level().isClientSide()) {&amp;#10;    _player.displayClientMessage(net.minecraft.network.chat.Component.literal(\"\\u00A7bThresher Charges: \" + (int)newTotal), true);&amp;#10;}</field><next><block type=\"play_sound\"><field name=\"sound\">entity.fox.bite</field><field name=\"soundcategory\">neutral</field><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value><value name=\"level\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"pitch\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><next><block type=\"entity_add_potion_advanced\"><field name=\"potion\">REGENERATION</field><value name=\"level\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"duration\"><block type=\"math_number\"><field name=\"NUM\">200</field></block></value><value name=\"ambient\"><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value><value name=\"particles\"><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><next><block type=\"spawn_particle_multi\"><field name=\"particle\">CRIT</field><value name=\"count\"><block type=\"math_number\"><field name=\"NUM\">5</field></block></value><value name=\"x\"><block type=\"coord_x\"></block></value><value name=\"y\"><block type=\"coord_y\"></block></value><value name=\"z\"><block type=\"coord_z\"></block></value><value name=\"dx\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"dy\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"dz\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"speed\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><next><block type=\"wait\"><value name=\"ticks\"><block type=\"math_number\"><field name=\"NUM\">20</field></block></value><statement name=\"do\"><block type=\"entity_nbt_logic_set\"><value name=\"entity\"><block type=\"entity_from_deps\"></block></value><value name=\"tagName\"><block type=\"text\"><field name=\"TEXT\">canBeMilked</field></block></value><value name=\"tagValue\"><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block></statement><next><block type=\"return_actionresulttype\"><value name=\"return\"><block type=\"action_result_type\"><field name=\"type\">PASS</field></block></value></block></next></block></next></block><block type=\"math_dual_ops\" x=\"856\" y=\"74\"><field name=\"OP\">ADD</field></block><block type=\"entity_has_item_inventory\" x=\"1063\" y=\"106\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\"></field></block></value></block><block type=\"entity_set_mainhand_item\" x=\"816\" y=\"445\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">Items.BUCKET</field></block></value></block><block type=\"entity_set_offhand_item\" x=\"927\" y=\"1773\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value><value name=\"amount\"><block type=\"math_number\"><field name=\"NUM\">1</field></block></value><value name=\"item\"><block type=\"mcitem_all\"><field name=\"value\">Items.BUCKET</field></block></value></block><block type=\"controls_if\" x=\"141\" y=\"3034\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><block type=\"compare_mcitems\"><value name=\"a\"><block type=\"entity_iteminhand\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value></block></value><value name=\"b\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:SharkMeal</field></block></value></block></value><statement name=\"DO0\"><block type=\"entity_send_chat\"><value name=\"text\"><block type=\"text\"><field name=\"TEXT\">Feeding on Cooldown</field></block></value><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value><value name=\"actbar\"><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></statement><value name=\"IF1\"><block type=\"compare_mcitems\"><value name=\"a\"><block type=\"entity_iteminoffhand\"><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value></block></value><value name=\"b\"><block type=\"mcitem_all\"><field name=\"value\">CUSTOM:SharkMeal</field></block></value></block></value><statement name=\"DO1\"><block type=\"entity_send_chat\"><value name=\"text\"><block type=\"text\"><field name=\"TEXT\">Feeding on Cooldown</field></block></value><value name=\"entity\"><block type=\"source_entity_from_deps\"></block></value><value name=\"actbar\"><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></statement></block></xml>"
  }
}