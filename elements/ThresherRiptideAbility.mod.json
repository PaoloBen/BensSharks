{
  "_fv": 73,
  "_type": "procedure",
  "definition": {
    "procedurexml": "<xml xmlns=\"https://developers.google.com/blockly/xml\"><block type=\"event_trigger\" deletable=\"false\" x=\"40\" y=\"40\"><field name=\"trigger\">player_right_click_item</field><next><block type=\"java_code\"><field name=\"CODE\">// We check the 'entity' here, which in a Global Trigger refers to the Player&amp;#10;if (entity instanceof net.minecraft.world.entity.player.Player player) {&amp;#10;    &amp;#10;    // 1. CHECK FOR CHARGES&amp;#10;    double charges = entity.getPersistentData().getDouble(\"ThresherRiptideCharges\");&amp;#10;    &amp;#10;    if (charges &gt; 0) {&amp;#10;        // Decrement charge&amp;#10;        entity.getPersistentData().putDouble(\"ThresherRiptideCharges\", charges - 1);&amp;#10;        &amp;#10;        // 2. RIPTIDE PHYSICS&amp;#10;        // Get the direction the player is looking&amp;#10;        net.minecraft.world.phys.Vec3 viewDir = entity.getViewVector(1.0f);&amp;#10;        &amp;#10;        // Launch! (Multiply by 3.0 for Riptide III speeds)&amp;#10;        entity.setDeltaMovement(viewDir.x * 3.0, viewDir.y * 3.0, viewDir.z * 3.0);&amp;#10;        entity.hasImpulse = true; // Important for Client smoothness&amp;#10;        &amp;#10;        // Reset Fall Distance so you don't splat when you land&amp;#10;        entity.fallDistance = 0;&amp;#10;        &amp;#10;        // If you are in the air, you might want to start \"Spinning\" (Elytra flying state)&amp;#10;        // This is optional, but helps the visual feel:&amp;#10;        if (!entity.onGround()) {&amp;#10;            player.startFallFlying(); &amp;#10;        }&amp;#10;&amp;#10;        // 3. SOUND&amp;#10;        if (world instanceof net.minecraft.world.level.Level _level) {&amp;#10;            _level.playSound(null, entity.getX(), entity.getY(), entity.getZ(), &amp;#10;                net.minecraftforge.registries.ForgeRegistries.SOUND_EVENTS.getValue(new net.minecraft.resources.ResourceLocation(\"item.trident.riptide_3\")), &amp;#10;                net.minecraft.sounds.SoundSource.PLAYERS, 1.0f, 1.0f);&amp;#10;        }&amp;#10;        &amp;#10;        // 4. DISPLAY REMAINING CHARGES&amp;#10;        if (!world.isClientSide()) {&amp;#10;            player.displayClientMessage(net.minecraft.network.chat.Component.literal(\"\\u00A7bThresher Charges: \" + (int)(charges - 1)), true);&amp;#10;        }&amp;#10;    }&amp;#10;}</field></block></next></block></xml>"
  }
}